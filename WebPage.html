<html>

<head>
  <title> BWIBot Information </title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script>
    window.jQuery || document.write('<script src="js/jquery-1.8.2.min.js" type="text/javascript"><\/script>');
  </script>
  <!--upload jquery api to the server so if the api were to go down, we can pull it
            directly from the server (skylar says)-->
</head>
<style>
  * {
    font-family: open_sans, "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif;
  }

  body {
    background-color: white;
  }

  h1 {
    color: black;
    font-size: 40px;
    font-family: fantasy;
  }

  tr {
    color: black;
    font-size: 30px;
    font-family: monospace;
    font-size: 30px;
  }
  img {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  table {
    text-align: center;
  }
</style>

<body>

  <h1> <center> BWIBot Information </center> </h1>

  <table style = "width:90%">
    <tr>
      <th>Robot</th>
      <th>Battery</th>
      <th>User</th>
      <th>Floor</th>
      <th>Battery Time Remaining</th>
      <th>Charging Order</th>
    </tr>
    <tr>
      <td> <img class = "robot_leela" src = "Icons\leela.png" alt = "" /> </td>
      <td> <img class = "leela_battery battery" src="Icons/unknown_battery.png"/> </td>
      <td> <b1 class = "leela_user">Unknown</b1> </td>
      <td> <b1 class = "leela_floor">Unknown</b1> </td>
      <td> <b1 class = "leela_time_remaining">Unknown</b1> </td>
      <td> <b1 class = "leela_charge_order">0</b1> </td>
    </tr>
    <tr>
      <td> <img class = "robot_bender" src = "Icons\bender.png" alt = "" /> </td>
      <td> <img class = "bender_battery battery" src="Icons/unknown_battery.png"/> </td>
      <td> <b1 class = "bender_user">Unknown</b1> </td>
      <td> <b1 class = "bender_floor">Unknown</b1> </td>
      <td> <b1 class = "bender_time_remaining">Unknown</b1> </td>
      <td> <b1 class = "leela_charge_order">0</b1> </td>
    </tr>
   <!-- <tr> comment in if pickles is ever added to the json
      <td> <img class = "robot_pickles" src = "Icons\pickles.png" alt = "" /> </td>
      <td> <img class = "pickles_battery battery" src = "Icons/unknown_battery.png"/> </td>
      <td> <b1 class = "pickles_user">Unknown</b1> </td>
      <td> <b1 class = "pickles_floor">Unknown</b1> </td>
    </tr> -->
  </table>

  <table>
    <tr>
      <th style = "padding: 30px">Turn On</th>
      <th style = "padding: 30px">Turn Off</th>
    </tr>
    <tr>
      <td> <img class = "on" src = "Icons\turn_on.png"/></td>
      <td> <img class = "off" src = "Icons\turn_off.png" /></td>
    </tr>
  </table>

  <script>
    (function() {
      $.get("http://nixons-head.csres.utexas.edu:7978/json", function(data) {
        var parsedHead = JSON.parse(data);
        //parsedHead[0] = Leela's info
        //parsedHead[1] = Bender's info

        //leela's data
        if(typeof parsedHead[0] != 'undefined')
        {
          if(typeof parsedHead[0].Alive != 'undefined')
          {
            if(parsedHead[0].Alive === "false") 
            {
                $(".leela_battery").attr("src", "Icons/empty_off.jpg");
            } else 
            {
                if(typeof parsedHead[0].TimeRemaining != 'undefined')
                    {
                        var leela_time_remaining = parsedHead[0].TimeRemaining;
                        $(".leela_time_remaining").html(leela_time_remaining); 
                        //may need adjustment after we ensure json works
                    }
                if(leela_time_remaining >= 16)
                    $(".leela_battery").attr("src", "Icons/full_battery.png");
                else if(leela_time_remaining >= 12)
                    $(".leela_battery").attr("src", "Icons/2_part_battery.png");
                else if(leela_time_remaining >= 2)
                    $(".leela_battery").attr("src", "Icons/1_part_battery.png");
                else
                    $(".bender_battery").attr("src", "Icons/dead_battery.png");
            }
          }

          if(typeof parsedHead[0].User != 'undefined')
            $(".leela_user").html(parsedHead[0].User);

          if(typeof parsedHead[0].Level != 'undefined')
            $(".leela_floor").html(parsedHead[0].Level);
        }

        //bender's data  
        if(typeof parsedHead[1] != 'undefined')
        {
          if(typeof parsedHead[1].Alive != 'undefined')
          {
            if (parsedHead[1].Alive === "false") 
            {
              $(".bender_battery").attr("src", "Icons/empty_off.jpg");
            } 
            else 
            {       
                if(typeof parsedHead[1].TimeRemaining != 'undefined')
                    {
                        var bender_time_remaining = parsedHead[1].TimeRemaining;
                        $(".bender_time_remaining").html(bender_time_remaining); 
                        //may need adjustment after we ensure json works
                    }
               if(bender_time_remaining >= 16)
                    $(".bender_battery").attr("src", "Icons/full_battery.png");
                else if(bender_time_remaining >= 12)
                    $(".bender_battery").attr("src", "Icons/2_part_battery.png");
                else if(bender_time_remaining >= 2)
                    $(".bender_battery").attr("src", "Icons/1_part_battery.png");
                else
                    $(".bender_battery").attr("src", "Icons/dead_battery.png");
            }
          }

          if(typeof parsedHead[1].User != 'undefined')
            $(".bender_user").html(parsedHead[1].User);

          if(typeof parsedHead[1].Level != 'undefined')
            $(".bender_floor").html(parsedHead[1].Level);
        }

        // comment in if pickles is added to the json
        /*if(typeof parsedHead[2] != 'undefined')
        {
          if(typeof parsedHead[2].Alive != 'undefined')
          {
            if (parsedHead[1].Alive === "false") {
              $(".pickles_battery").attr("src", "Icons/dead_battery.png");
              //display red battery
            } else {
              $(".pickles_battery").attr("src", "Icons/full_battery.png");
              //if battery is above certain level, display different icons
            }
          }

          if(typeof parsedHead[2].User != 'undefined')
            $(".pickles_user").html(parsedHead[2].User);

          if(typeof parsedHead[2].Level != 'undefined')
            $(".pickles_floor").html(parsedHead[2].Level);

          if(typeof parsedHead[2].Percentage != 'undefined')
            $(".picles_batt_perc").html(parsedHead[2].Percentage); // may need adjustment depending on the json implementation
        }*/

      })
      .fail(function() {
        alert("Cannot connect to nixons-head.");
      });
      setTimeout(arguments.callee,60000);
    })();
      
    if()  

    var turn_on_instructions = "1. Move main power from 'CHARGER' TO 'BATTERY'." +
      "\n2. Turn on laptop and log in." +
      "\n3. Remove charging cable BEFORE moving robot." +
      "\n4. Move robot to desired start position." +
      "\n5. Turn on segway base (Push green button, wait 2 seconds, push yellow button)." +
      "\n6. Launch desired launch file (roslaunch bwi_launch segbot_v2.launch).";
    var turn_off_instructions = "1. Kill all running launch programs." +
      "\n2. Turn off segway base (Push yellow button, wait 2 seconds, push green button)." + "\n3. Turn off laptop." +
      "\n4. Move robot to charging area." +
      "\n5. Plug in charging cable." +
      "\n6. Move main power from 'BATTERY' to 'CHARGER'.";
    $(document).ready(function() {
      $(".on").click(function() {
        alert(turn_on_instructions);
      });
      $(".off").click(function() {
        alert(turn_off_instructions);
      });
    });
  </script>
</body>

</html>
